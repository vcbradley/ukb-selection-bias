library(pmRMW)
ls9)
ls()
library(readr)
pl_results_16_17 <- read_csv("github/ranking-ties/data/pl_results_16_17.csv")
View(pl_results_16_17)
View(pl_results_16_17)
lm(FTHG ~ HomeTeam, data = pl_results_16_17)
summary(lm(FTHG ~ HomeTeam, data = pl_results_16_17))
kable(summary(lm(FTHG ~ HomeTeam, data = pl_results_16_17)))
library(kable)
install.packages('kable')
kable(summary(lm(FTHG ~ HomeTeam, data = pl_results_16_17)))
library(kable)
library(knitr)
kable(summary(lm(FTHG ~ HomeTeam, data = pl_results_16_17)))
coefs(lm(FTHG ~ HomeTeam, data = pl_results_16_17))
coef(lm(FTHG ~ HomeTeam, data = pl_results_16_17))
coef(lm(FTHG ~ HomeTeam, data = pl_results_16_17)), sd(lm(FTHG ~ HomeTeam, data = pl_results_16_17))
cbind(coef(lm(FTHG ~ HomeTeam, data = pl_results_16_17)), sd(lm(FTHG ~ HomeTeam, data = pl_results_16_17)))
mod = lm(FTHG ~ HomeTeam, data = pl_results_16_17)
coef(mod)
summary(mod)
names(summary(mod))
summary$coef
summary(mod)$coef
kable(summary(mod)$coef)
library(dagitty)
library(dagitty)
g <- dagitty('dag {
X [pos="0,1"]
Y [pos="1,1"]
Z [pos="2,1"]
W [pos="1,0"]
T [pos="2,2"]
X -> Y -> Z -> T
X -> W -> Y -> T
W -> Z
}')
plot(g)
install.packages('dagitty')
library(dagitty)
g <- dagitty('dag {
X [pos="0,1"]
Y [pos="1,1"]
Z [pos="2,1"]
W [pos="1,0"]
T [pos="2,2"]
X -> Y -> Z -> T
X -> W -> Y -> T
W -> Z
}')
plot(g)
?dagitty
knitr::opts_chunk$set(echo = FALSE)
setwd('~/github/mini-project-1/weighting')
list.files()
load('ukb_weighted_hse16_summary.rda')
weight_summary
ggplot(weight_summary, aes(x = pop_prop, y = level)) + geom_point()
library(data.table)
library(data.table)
library(ggplot2)
ggplot(weight_summary, aes(x = pop_prop, y = level)) + geom_point()
weight_summary
ggplot(weight_summary[grepl('Sex|Age|Ethnicity', var)], aes(x = var, y = pop_prop)) + geom_bar( stat="identity", position="fill")
ggplot(weight_summary[grepl('Sex|Age|Ethnicity', var)], aes(x = var, y = as.numeric(pop_prop))) + geom_bar( stat="identity", position="fill")
ggplot(weight_summary[grepl('Sex|Age|Ethnicity', var)], aes(x = var, y = as.numeric(pop_prop), fill = level)) + geom_bar( stat="identity", position="fill")
ggplot(weight_summary[var == '01-Sex'], aes(x = var, y = as.numeric(pop_prop), fill = level)) + geom_bar( stat="identity", position="fill")
weight_summary
ggplot(weight_summary[var == '02-Sex'], aes(x = var, y = as.numeric(pop_prop), fill = level)) + geom_bar( stat="identity", position="fill")
weight_summary
ggplot(weight_summary[var == '02-Sex'], aes(x = var, y = as.numeric(pop_prop_weighted), fill = level)) +
geom_bar( stat="identity", position="fill") +
geom_bar( stat="identity", position="fill", aes(x = var, y = as.numeric(samp_prop)))
ggplot(weight_summary[var == '02-Sex']) +
geom_bar( stat="identity", position="fill", aes(x = var, y = as.numeric(pop_prop_weighted), fill= level)) +
geom_bar( stat="identity", position="fill", aes(x = var, y = as.numeric(samp_prop), fill= level))
ggplot(weight_summary[var == '02-Sex']) +
geom_bar( stat="identity", position="fill", aes(x = 'Pop', y = as.numeric(pop_prop_weighted), fill= level)) +
geom_bar( stat="identity", position="fill", aes(x = 'Sample', y = as.numeric(samp_prop), fill= level))
ggplot(weight_summary[var == '02-Sex']) +
geom_bar( stat="identity", position="fill", aes(x = 'Population', y = as.numeric(pop_prop_weighted), fill= level)) +
geom_bar( stat="identity", position="fill", aes(x = 'Sample', y = as.numeric(samp_prop), fill= level)) +
ylab("% of group") + ggtitle(var)
ggplot(weight_summary[var == '02-Sex']) +
geom_bar( stat="identity", position="fill", aes(x = 'Population', y = as.numeric(pop_prop_weighted), fill= level)) +
geom_bar( stat="identity", position="fill", aes(x = 'Sample', y = as.numeric(samp_prop), fill= level)) +
ylab("% of group") #+ ggtitle(var)
ggplot(weight_summary[var == '02-Sex']) +
geom_bar( stat="identity", position="fill", aes(x = 'Population', y = as.numeric(pop_prop_weighted), fill= level)) +
geom_bar( stat="identity", position="fill", aes(x = 'Sample', y = as.numeric(samp_prop), fill= level)) +
ylab("% of group") + ggtitle('Sex')
ggplot(weight_summary[var == '02-Sex']) +
geom_bar( stat="identity", position="fill", aes(x = 'Population', y = as.numeric(pop_prop_weighted), fill= level)) +
geom_bar( stat="identity", position="fill", aes(x = 'Sample', y = as.numeric(samp_prop), fill= level)) +
ylab("% of group") + ggtitle('Sex') +xlab('')
weight_summary
weight_summary[level %in% c('Female','45 to 49','01-White', '1', '01-Under 18k')]
weight_summary
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(x = as.numeric(pop_prop_weighted), y = level) + geom_facet(~.var)
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(x = as.numeric(pop_prop_weighted), y = level) + geom_facet(~.var)
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(pop_prop_weighted), y = level)) + geom_facet(~.var)
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(pop_prop_weighted), y = level)) + facet_grid(~.var)
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(pop_prop_weighted), y = level)) + facet_grid(.~var)
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(pop_prop_weighted), y = level)) + facet_grid(var~.)
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(pop_prop_weighted), y = level))
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(pop_prop_weighted), y = paste0(var, ': ',level)))
weight_summary
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = pop_prop_weighted, y = paste0(var, ': ',level)))
weight_summary[, pop_prop_weighted]
weight_summary[, as.numeric(pop_prop_weighted)]
weight_summary[, as.numeric(as.character(pop_prop_weighted))]
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level)))
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort'))
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(sample_prop)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort'))
weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(samp_prop)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort'))
ggplot(weight_summary[level %in% c('Female','45 to 49', '70 to 74', '75 to 79', '01-White', '1', '01-Under 18k')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(samp_prop)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort')) +
ggtitle("UK Population v. UKB Imaging cohort") +
xlab("proportion of group") +
ylab("")
weight_summary
ggplot(weight_summary[level %in% c('Female', '01-White', '1', '01-Under 18k', '01-College plus/profesh', '01-Own outright','02-Own with mortgage') | var %in% c('03-Age Bucket', '11-Income')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(samp_prop)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort')) +
ggtitle("UK Population v. UKB Imaging cohort") +
xlab("proportion of group") +
ylab("")
library(knitr)
include_graphics('(~/github/mini-project-1/presentation/selection-bias-ex'
, auto_pdf = getOption("knitr.graphics.auto_pdf", FALSE)
, dpi = NULL)
knitr::opts_chunk$set(echo = FALSE)
library(ggplot2)
library(data.table)
library(knitr)
load('~/github/mini-project-1/weighting/ukb_weighted_hse16_summary.rda')
weight_summary
ggplot(weight_summary[level %in% c('Female', '01-White', '1', '01-Under 18k', '01-College plus/profesh', '01-Own outright','02-Own with mortgage') | var %in% c('03-Age Bucket', '11-Income')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(bart_prop)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort')) +
ggtitle("UK Population v. UKB Imaging cohort") +
xlab("proportion of group") +
ylab("")
ggplot(weight_summary[level %in% c('Female', '01-White', '1', '01-Under 18k', '01-College plus/profesh', '01-Own outright','02-Own with mortgage') | var %in% c('03-Age Bucket', '11-Income')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(bart_prop)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort')) +
geom_point(aes(x = as.numeric(as.character(bart_prop)), y = paste0(var, ': ',level), color = 'BART adjusted')) +
ggtitle("UK Population v. UKB Imaging cohort") +
xlab("proportion of group") +
ylab("")
ggplot(weight_summary[level %in% c('Female', '01-White', '1', '01-Under 18k', '01-College plus/profesh', '01-Own outright','02-Own with mortgage') | var %in% c('03-Age Bucket', '11-Income')]) +
geom_point(aes(x = as.numeric(as.character(pop_prop_weighted)), y = paste0(var, ': ',level), color = 'Population')) +
geom_point(aes(x = as.numeric(as.character(samp_prop)), y = paste0(var, ': ',level), color = 'UKB Imaging cohort')) +
geom_point(aes(x = as.numeric(as.character(bart_prop)), y = paste0(var, ': ',level), color = 'BART adjusted')) +
ggtitle("UK Population v. UKB Imaging cohort") +
xlab("proportion of group") +
ylab("")
